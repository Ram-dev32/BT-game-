<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>BETWEEN GAME</title>

  <style>
    body {
      background:#0b3d2e;
      color:white;
      font-family:Arial;
      text-align:center;
    }
    button,input,select {
      padding:6px;
      margin:4px;
    }
  </style>
</head>

<body>

<h2>BETWEEN GAME</h2>

<input id="roomId" placeholder="Enter Room ID">
<button onclick="hostGame()">Host</button>
<button onclick="joinGame()">Join</button>

<p id="status">WAITING...</p>

<hr>

<button onclick="play()">PLAY</button>

<!-- ðŸ”¥ FIREBASE + GAME LOGIC -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

/* ðŸ”´ YOUR FIREBASE DETAILS */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "bt-game-21a9d.firebaseapp.com",
  databaseURL: "https://bt-game-21a9d-default-rtdb.firebaseio.com",
  projectId: "bt-game-21a9d",
  storageBucket: "bt-game-21a9d.appspot.com",
  messagingSenderId: "YOUR_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

let room = "";

/* HOST */
window.hostGame = function () {
  room = document.getElementById("roomId").value || "room1";
  set(ref(db, "rooms/" + room), {
    host: true,
    joined: false
  });
  document.getElementById("status").innerText = "HOST CREATED";
};

/* JOIN */
window.joinGame = function () {
  room = document.getElementById("roomId").value || "room1";
  set(ref(db, "rooms/" + room + "/joined"), true);
  document.getElementById("status").innerText = "JOINED ROOM";
};

/* PLAY */
window.play = function () {
  if (!room) return alert("Host or Join first");
  set(ref(db, "rooms/" + room + "/play"), Math.floor(Math.random()*100));
};

/* LISTEN */
function listen() {
  if (!room) return;
  onValue(ref(db, "rooms/" + room), snap => {
    document.getElementById("status").innerText =
      JSON.stringify(snap.val());
  });
}

setInterval(listen,1000);
</script>

</body>
</html>
